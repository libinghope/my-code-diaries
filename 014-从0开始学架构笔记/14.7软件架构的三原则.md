---
date: 2020/3/14
comments: true
categories:
  - 软件架构
tags:
  - 架构
  - 原则
permalink: "5.7"
title: 软件架构的三原则
---
前面说过成为架构师是每个程序员的梦想，但并不意味着把编程做好，就能够自然而然的成为一个架构师，优秀程序员和架构师之间还有一个明显的鸿沟需要跨越，这个鸿沟就是不确定性，对于编程来说本质上是不存在不确定的，对于同样一段代码不管谁写的，不管什么时候执行，执行的结果都应该是确定的，但是设计架构则不一样，同样一个方案，A设计师认为应该这样，B设计师认为应该那样，看起来好像都是有道理的，即相比于编程来说，架构设计并没有像编程语言那样的语法来进行约束，更多的时候是面对各种可能性进行的权衡抉择。

而一旦涉及到选择，就很容易让架构师陷入两难的境地，
比如是要选择业界最先进的技术，还是选择团队目前最熟悉的技术，如果选择了最先进的技术后出了问题怎么办？如果选择了目前最熟悉的技术，后续技术引进怎么办？
是选择Google的angular的方案来做，还是选择Facebook的react来做安格拉，看起来很强大，但是react看起来更加灵活。

是选择使用my sql数据库还是mongodb数据库？团队熟悉my circle，但是曼谷地壁更加适合业务场景。
淘宝的电商网站架构很完善，我们要做一个电商网站，是否简单的照搬淘宝就可以了。
总之呢，这种类似的问题困惑非常非常的多，业务千变万化，技术层出不穷，涉及理念也百花齐放，看起来很难有一套通用的规范，适用所有的架构场景。但是在研究了架构设计的发展历史，多个公司的架构发展过程，例如QQ，淘宝Facebook等众多的互联网公司架构设计后，还是能够找到几个共性的原则的。这几个原则就是合适原则，简单原则和演化原则。

## 合适原则

合适原则的主旨就一句话，适合优于业界领先。  

优秀的技术人员往往都有很强技术情结，他们往往希望能够在自己的项目中展示自己的技术水平，秀技术——我也做一个亿级用户的平台，在很多技术人员的心里是根深蒂固的。  

但是现实中大部分这样想这样做的，假如最后都可能以失败告终。原因有如下几个方面。

* 1 人少活多  
小公司没有大公司那样的分工细致，一个小系统可能就是一个小组负责，比如说某个大公司做一个OEM管理系统就有十几个人，阿里的中间建团队有几十个人，而大部分公司整个研发团队可能就百十号人，某个业务团队可能就十几号人，十几个人的团队，想做几十个人的团队，做的事情还要做的比他们更好，不是说绝对不可能，难度是可想而知的。
也就是说没那么多人却想要干那么多的活，是典型的好高骛远。
* 2  罗马不是一天建成的  
业界领先的很多方案都是一步一步经过多年的积累才最终完成的，例如阿里中间件团队2008年才成立，发展到现在已经10多年了。这中间他们踩了多少坑，遇到了多少挑战，其实只有他们自己才知道。  
技术需要积累，不可能一步登天。

* 3 算业务场景才能催生技术方案  
很多时候业绩的领先方案都是被现实逼出来的，简单的来说就是业务发展到一定阶段，量变导致了质变，出现了新的问题，应用的方式不能应对这些问题，所以才创造出了一个新的方案。Gfs为何在Google诞生，而不是在微软诞生，这是因为Google公司有那么庞大的数据要处理这个因素导致的。
没有现实业务场景需求，想要凭幻想灵光一闪创造出天才的方案来，基本上是不可能的。

所以真正优秀的架构都是在企业当前人力条件业务等各种约束下设计出来了，能够合理的将资源整合在一起，并发挥出最大功效，亦能快速落地。

## 简单原则

主旨就是说简单优于复杂。  

在现实生活中很多东西都是越复杂，越精细会显得技术越好，但在软件架构这方面却不是这样的。在软件领域结构复杂的系统，往往组成组件数量非常之多，同时这些组件之间的关系也非常的复杂。组建越多，关联越多，那么这些组件其中某个或者多个出现故障的可能性就大大提高，而且有时候修改一个组件会导致关联的所有的组件受影响。  
另外在复杂系统中定位问题比简单系统要困难的多，每个组件都有嫌疑，因此要逐一排查，其次组建间的关系复杂，有可能表现故障的组件并不是真正问题的根源。

复杂系统的内部逻辑往往也非常的复杂，逻辑复杂，几乎会导致软件工程每个的环节都有问题，比如说假如说淘宝的将很多功能在一个组件当中实现，那么假如说某一个程序员不小心改了一行代码，就会导致整个网站崩溃，这时候再想上去维护，然后找出问题恐怕是非常难的。
总之软件结构和逻辑越简单越好。

## 演化原则

意思就是说一步步演化，远远强于一步考虑完所有的情况。
软件架构和我们平常在日常生活中见到的架构是不一样的，比如说我们平常见到的，建筑物架构，古埃及的大金字塔，4000年前完成的，到现在也不会再改了，中国的长城几百年前造完的，到现在还是当年的结构，美国的白宫也是原来的骨架，顶多外面刷一层漆。

但是软件架构就不一样了，比如说windows系统的发展历史，从最开始的msdos到现如今的Windows 10。你会发现，哪怕对比的是windows，一和windows8架构他们也是两个完全不同的东西了。与此相同的是安卓的发展历史也是这样子，安卓6.0和安卓1.6的差异非常的大。  
对比现实中的建筑物架构，永恒是主题，而对于软件来说变化才是主题。软件架构需要根据业务的发展不断变化。设计windows和安卓的人都是顶尖的天才，即便如此他们也不可能在1985年设计出windows8，不可能在2009年设计出安卓6.0。

所以在做软件架构的时候，不要妄图一步到位设，考虑到所有的方方面面，永远都不用改，永远都稳如磐石。  

软件架构设计其实更加类似于大自然设计，一个生物通过氧化让生物适应，环境逐步变得更加强大。

软件架构同样应该是类似的过程。

* 首先设计出来的架构要满足当时的业务需求。  

* 其次，架构要不断的，实际应用过程中迭代保留优秀的设计修复，有缺陷的设计改成错误的设计，去掉无用的设计，使得价格逐渐完善。

* 再次当业务发生变化时，架构要扩展成功，甚至重写代码也许会重叠，但有价值的经验教训，逻辑设计等却可以在新的架构中延续。

演化是在进行架构设计时，需要牢记这个原则，时刻提醒自己不要贪大求全或者盲目照搬大公司的做法，应该认真分析当前业务的特点，明确业务面临的主要问题，设计合理的架构，快速的落地满足业务需求，然后在运行过程中不断完善架构，不断随着业务进行演化。
